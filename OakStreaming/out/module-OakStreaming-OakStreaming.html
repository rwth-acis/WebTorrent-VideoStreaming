<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: OakStreaming</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Class: OakStreaming</h1>

    




<section>

<header>
    
        <h2>
            <span class="ancestors"><a href="module-OakStreaming.html">OakStreaming</a>~</span>OakStreaming</h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        

    

    <h4 class="name" id="OakStreaming"><span class="type-signature"></span>new OakStreaming<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    This constructor creates a OakStreaming instance. OakStreaming instances can seed and/or receive and/or relay video streams.In order to stream a video from one OakStreaming instance to another, a peer-to-peer connection between both OakStreaming instances has to be established.To build up a peer-to-peer connection between two OakStreaming instances, signaling data has to be exchanged between both instances.This exchange of signaling data can happen automatically via a signaling server or manually by using the createSignalingData, createSignalingDataResponseand procressSignalingData methods of the OakStreaming instances. OakStreaming instances can seed a video stream by using the streamVideo method.OakStreaming instances can receive, play back and relay a video stream by using the loadVideo method.OakStreaming instances can also (partly) receive a video stream from a Web server via XML HTTP Requests (XHRs).
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="Doku.js.html">Doku.js</a>, <a href="Doku.js.html#line17">line 17</a>
    </li></ul></dd>
    

    

    

    
</dl>
















    
    </div>

    

    

    

     

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    <h4 class="name" id="~createSignalingData"><span class="type-signature">(inner) </span>createSignalingData<span class="signature">(callback)</span><span class="type-signature"></span></h4>

    



<div class="description">
    This method creates signaling data that can be put into the createSignalingDataResponse method of another OakStreaming instance in order to manually building up a peer-to-peer connection between both OakStreaming instances.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>callback</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="OakStreaming.html#~createSignalingData1_callback">OakStreaming~createSignalingData1_callback</a></span>


            
            </td>

            

            

            <td class="description last">This callback function gets called with the generated signalingData object as soon as the signaling data has been created.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="Doku.js.html">Doku.js</a>, <a href="Doku.js.html#line71">line 71</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="~createSignalingDataResponse"><span class="type-signature">(inner) </span>createSignalingDataResponse<span class="signature">(signalingData, callback)</span><span class="type-signature"></span></h4>

    



<div class="description">
    This method expects a SignalingData object that was created by the createSignalingData method of another OakStreaming instance and generates the respective response SignalingData object. In order to complete the signaling data exchange, this response signalingData object then has to be put into the processSignalingResponse method of the OakStreaming instance which has initialized the signaling.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>signalingData</code></td>
            

            <td class="type">
            
                
<span class="param-type">SignalingData</span>


            
            </td>

            

            

            <td class="description last">A signaling data object that was created by the createSignalingData method of another OakStreaming instance.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>callback</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="OakStreaming.html#~createSignalingData2_callback">OakStreaming~createSignalingData2_callback</a></span>


            
            </td>

            

            

            <td class="description last">This callback function gets called with the generated signalingData object.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="Doku.js.html">Doku.js</a>, <a href="Doku.js.html#line85">line 85</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="~get_file_size"><span class="type-signature">(inner) </span>get_file_size<span class="signature">()</span><span class="type-signature"> &rarr; {Number}</span></h4>

    



<div class="description">
    This method returns the size in bytes of the video file that is or has been streamed/received.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="Doku.js.html">Doku.js</a>, <a href="Doku.js.html#line57">line 57</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="~get_number_of_bytes_downloaded_from_server"><span class="type-signature">(inner) </span>get_number_of_bytes_downloaded_from_server<span class="signature">()</span><span class="type-signature"> &rarr; {Number}</span></h4>

    



<div class="description">
    This method returns the number of bytes downloaded from the Web server.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="Doku.js.html">Doku.js</a>, <a href="Doku.js.html#line25">line 25</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="~get_number_of_bytes_downloaded_P2P"><span class="type-signature">(inner) </span>get_number_of_bytes_downloaded_P2P<span class="signature">()</span><span class="type-signature"> &rarr; {Number}</span></h4>

    



<div class="description">
    This method returns the number of bytes downloaded from the peer-to-peer network. The return value includes bytes that were sent by the seeder.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="Doku.js.html">Doku.js</a>, <a href="Doku.js.html#line34">line 34</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="~get_number_of_bytes_uploaded_P2P"><span class="type-signature">(inner) </span>get_number_of_bytes_uploaded_P2P<span class="signature">()</span><span class="type-signature"> &rarr; {Number}</span></h4>

    



<div class="description">
    This method returns the number of bytes uploaded to the peer-to-peer network.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="Doku.js.html">Doku.js</a>, <a href="Doku.js.html#line42">line 42</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="~get_percentage_downloaded_of_torrent"><span class="type-signature">(inner) </span>get_percentage_downloaded_of_torrent<span class="signature">()</span><span class="type-signature"> &rarr; {Number}</span></h4>

    



<div class="description">
    This method returns the percentage of the video file that the OakStreaming instance has already downloaded from the peer-to-peer network.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="Doku.js.html">Doku.js</a>, <a href="Doku.js.html#line50">line 50</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    A value between 0 and 1
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="~loadVideo"><span class="type-signature">(inner) </span>loadVideo<span class="signature">(stream_information_object, callback<span class="signature-attributes">opt</span>, stop_uploading_when_video_downloaded<span class="signature-attributes">opt</span>)</span><span class="type-signature"></span></h4>

    



<div class="description">
    This method tries to receive the video stream described in the stream_information object.After this method has been called, the OakStreaming instance offers received video data to all OakStreaming instances with whom it is connected.The received video data will be streamed into the first HTML video element of the DOM.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>stream_information_object</code></td>
            

            <td class="type">
            
                
<span class="param-type">Stream_Information</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">This object contains all data that is needed to initiate downloading the video from other OakStreaming instances and/or a Web server. Stream_Information objects can be created by the streamVideo method.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>callback</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="OakStreaming.html#~downloadingVideoFinished">OakStreaming~downloadingVideoFinished</a></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">This callback gets called when the video has been buffered entirely.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>stop_uploading_when_video_downloaded</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">If this argument is true, all uploading to other OakStreaming instances is permanently cancelled and all processing of the loadVideo method permanently stopped as soon as the video has been downloaded completely.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="Doku.js.html">Doku.js</a>, <a href="Doku.js.html#line150">line 150</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="~processSignalingResponse"><span class="type-signature">(inner) </span>processSignalingResponse<span class="signature">(signalingData, callback<span class="signature-attributes">opt</span>)</span><span class="type-signature"></span></h4>

    



<div class="description">
    This method expects a signaling data object that a createSignalingResponse method of another OakStreaming has generated based on a signaling data object that the createSignalingData method of this OakStreaming method created. After the signaling data object has been processed, this OakStreaming instance automatically builds up a peer-to-peer connection to the other OakStreaming instance. After the peer-to-peer connection has been established, both OakStreaming instances automatically exchange video fragments.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>signalingData</code></td>
            

            <td class="type">
            
                
<span class="param-type">SignalingData</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">A signaling data object that was created by the createSignalingResponse method of another OakStreaming instance. A necessary requirement is that the createSigngalingResponse method created the signaling data object based on a signalingdata object that the createSignalingData method of this OakStreaming instance generated.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>callback</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="OakStreaming.html#~createSignalingData3_callback">OakStreaming~createSignalingData3_callback</a></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">This callback function gets called with no arguments as soon as the peer-to-peer connection between the two OakStreaming instances has been established.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="Doku.js.html">Doku.js</a>, <a href="Doku.js.html#line99">line 99</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="~streamVideo"><span class="type-signature">(inner) </span>streamVideo<span class="signature">(video_file<span class="signature-attributes">opt</span>, options<span class="signature-attributes">opt</span>, callback)</span><span class="type-signature"></span></h4>

    



<div class="description">
    This method creates a Stream_Information object that other OakStreaming instances can pass as an argument to their loadVideo method to download the video from this and other OakStreaming instances and/or a Web server.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>video_file</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">The video file that should be streamed peer-to-peer to other OakStreaming instances. This parameter can either be a <a href="https://developer.mozilla.org/en-US/docs/Web/API/File%20">W3C File object</a>, a <a href="https://developer.mozilla.org/en-US/docs/Web/API/FileList%20">W3C FileList</a>, a <a href="https://nodejs.org/api/buffer.html%20">Node Buffer object</a> or a <a href="https://nodejs.org/api/stream.html#stream_class_stream_readable%20">Readable stream object</a>.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>options</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">Options for the creation of the Stream_Information object. After its creation, the Stream_Information object gets passed by the streamVideo method as an argument to the callback function.
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>web_server_URL</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last">URL of a Web server that can serve the video file. If this property is not set, XML HTTP Requests (XHRs) will be send to the Web server that served the Web page. If this property is set to false (not only falsy), no Web server will be requested. The default port value is 80.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>path_to_file_on_Web_server</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last">This path will be used for the XML HTTP Requests (XHRs). For example, a valid path could be "/videos/aVideoFile.mp4". The default value of this property is "/" concatenated with the name of the file that is seeded.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>hash_value</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last">The SHA-256 hash value of the video file that should by (partially) requested from the Web server. If this hash_value property is defined, it instead of the path_to_file_on_Web_server property will be used for XHRs.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>download_from_server_time_range</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    5
                
                </td>
            

            <td class="description last">How many seconds of video playback must be buffered in advance such that no data is requested from the Web server.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>webTorrent_trackers</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;string></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last">Array of WebTorrent torrent tracker URLs (strings). One of these torrent trackers will be used to connect to other OakStreaming instances. The OakStreaming client will first try to connect to the torrent tracker URL at index 0 of the array, then to the URL at index 1 and so forth. If this parameter is set to false (not only falsy), the OakStreaming instance will not build up a connection to any torrent tracker. If this parameter is not set, the following URL list will be used: ["wss://tracker.webtorrent.io", "wss://tracker.openwebtorrent.com", "wss://tracker.fastcast.nz", "wss://tracker.btorrent.xyz"]</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>sequential_requests_time_range</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    20
                
                </td>
            

            <td class="description last">How many seconds of video playback must be buffered in advance such that no sequential data streams are requested from the WebTorrent network and instead video fragments are requested according to the rarest-peace-first strategy.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>size_of_sequential_requests</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    5000000
                
                </td>
            

            <td class="description last">The size of the sequential byte range requests to the WebTorrent network. Keeping the default value is sufficient for most use cases.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>peer_upload_limit_multiplier</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    2
                
                </td>
            

            <td class="description last">The OakStreaming client will severely throttle the video data upload to other peers when (bytes_uploaded_to_other_peers * peer_upload_limit_multiplier + peer_upload_limit_addend >  bytes_downloaded_from_other_peers). The OakStreaming client will stop the throttling as soon as the before mentioned inequality is no longer true.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>peer_upload_limit_addend</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    3000000
                
                </td>
            

            <td class="description last">The OakStreaming client will severely throttle the video data upload to other peers when (bytes_uploaded_to_other_peers * peer_upload_limit_multiplier + peer_upload_limit_addend >  bytes_downloaded_from_other_peers). The OakStreaming client will stop the throttling as soon as the before mentioned inequality is no longer true.</td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>callback</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="OakStreaming.html#~streamVideoFinished">OakStreaming~streamVideoFinished</a></span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">This callback function gets called with the generated Stream_Information object at the end of the execution of streamVideo.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="Doku.js.html">Doku.js</a>, <a href="Doku.js.html#line131">line 131</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-OakStreaming.html">OakStreaming</a></li></ul><h3>Classes</h3><ul><li><a href="module-OakStreaming-OakStreaming.html">OakStreaming</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Wed Aug 10 2016 13:47:55 GMT+0200 (W. Europe Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>